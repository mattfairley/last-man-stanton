var quizApp={};quizApp.key="9314b8803e6b1e173d0c8a52303b82ce",quizApp.name="",quizApp.credits=[],quizApp.moviesLeft=0,quizApp.players=[],quizApp.activePlayer=0,quizApp.totalPlayers=3,quizApp.playersLeft=3,quizApp.lives=1,quizApp.playerEliminated=!1,quizApp.keepPlaying=!0,quizApp.playerNames=[],quizApp.init=function(){quizApp.$setup=$("#setup"),quizApp.$answers=$("#answers"),quizApp.$nameInput=$("#name-input"),quizApp.$random=$("#random-name"),quizApp.$setup=$("div#setup"),quizApp.$play=$("div#play"),quizApp.$reset=$("#reset"),quizApp.$movieInput=$("#movie-input"),quizApp.$guessMovie=$("#guess-movie"),quizApp.$numPlayers=$("#players"),quizApp.$playerNames=$("#player-names"),quizApp.$playerField=$("#setup").find("p.player-number"),quizApp.$lives=$("#lives"),quizApp.$passTurn=$("#pass-turn"),quizApp.$displayTurn=$("#display-turn"),$("button").on("click",function(e){e.preventDefault()}),quizApp.$setup.on("submit",function(e){e.preventDefault(),quizApp.startGame()}),quizApp.$random.on("click",function(){quizApp.randomStart()}),quizApp.$reset.on("click",function(){quizApp.reset()}),quizApp.$guessMovie.on("submit",function(e){e.preventDefault(),quizApp.guessMovie()}),quizApp.$passTurn.on("click",function(){quizApp.pass()}),quizApp.$numPlayers.on("input change",function(){quizApp.changePlayerNum($(this).val())})},quizApp.changePlayerNum=function(e){for(quizApp.$playerNames.html(""),quizApp.totalPlayers=e,quizApp.$playerField.text(e+" players"),1==e&&quizApp.$playerField.text(e+" player"),i=0;e>i;i++)playerNum=Number(i+1),quizApp.playerNames[i]=quizApp.playerNames[i]||"",quizApp.$playerNames.append(""!==quizApp.playerNames[i]?'<li class="player'+playerNum+'"><input type="text" id="player'+playerNum+'-input" class="text-input player-name" placeholder="Player '+playerNum+'\'s name" value="'+quizApp.playerNames[i]+'"></li>':'<li class="player'+playerNum+'"><input type="text" id="player'+playerNum+'-input" class="text-input player-name" placeholder="Player '+playerNum+"'s name\"></li>")},quizApp.setPlayerNames=function(e){var t=e.length;for(i=0;t>i;i++){var n=Number(i+1),p="#player"+n+"-input",a=$(p).val();e[i]=a}},quizApp.setVariables=function(){quizApp.lives=Number(quizApp.$lives.find("input:checked").val()),quizApp.playersLeft=quizApp.totalPlayers,quizApp.moviesLeft=0,quizApp.players=[],quizApp.activePlayer=0,quizApp.credits=[],quizApp.setPlayerNames(quizApp.playerNames)},quizApp.startGame=function(){quizApp.$answers.empty(),quizApp.setVariables(),quizApp.name=quizApp.$nameInput.val(),""!==quizApp.name?(quizApp.activeInput=document.activeElement,quizApp.getName(quizApp.name)):swal("Enter a name!","","error")},quizApp.randomStart=function(){quizApp.$answers.empty(),quizApp.setVariables(),$.ajax({url:"http://api.themoviedb.org/3/person/popular",type:"GET",dataType:"jsonp",data:{api_key:"9314b8803e6b1e173d0c8a52303b82ce",page:1},success:function(e){var t=Math.floor(Math.random()*e.results.length),i=e.results[t].id;quizApp.name=e.results[t].name,swal({title:quizApp.name+"?",text:"Ever heard of them?",type:"info",cancelButtonText:"Nope",confirmButtonText:"Yep",showCancelButton:!0,closeOnCancel:!1},function(e){e?quizApp.getCredits(i):quizApp.randomStart()})}})},quizApp.getName=function(e){$.ajax({url:"http://api.themoviedb.org/3/search/person",type:"GET",dataType:"jsonp",data:{api_key:"9314b8803e6b1e173d0c8a52303b82ce",query:e},success:function(e){if(e.total_results>0){var t=e.results[0].id;quizApp.name=e.results[0].name,quizApp.getCredits(t)}else swal("Whoops!","That name isn't in TMDb. Check your spelling and try again.","error")}})},quizApp.getCredits=function(e){$.ajax({url:"http://api.themoviedb.org/3/person/"+e+"/movie_credits",type:"GET",dataType:"jsonp",data:{api_key:"9314b8803e6b1e173d0c8a52303b82ce"},success:function(e){var t=e.cast;quizApp.parseData(t)}})},quizApp.parseData=function(e){quizApp.credits=[],$.each(e,function(e,t){""!==t.character&&t.release_date&&t.title&&(quizApp.credits.push({title:t.title,year:Number(t.release_date.slice(0,4))}),quizApp.moviesLeft++)}),quizApp.checkLength(),quizApp.credits=quizApp.credits.sort(quizApp.sortByYear),quizApp.updateDOM()},quizApp.checkLength=function(){quizApp.credits.length<10&&swal({title:"Just so you know!",text:"There are only going to be "+quizApp.length+"movies to choose from.",type:"warning"})},quizApp.sortByYear=function(e,t){var i=e.year,n=t.year;return n>i?-1:i>n?1:0},quizApp.clearSetup=function(){$("p.benson").slideUp(function(){quizApp.$setup.fadeOut(function(){quizApp.$nameInput.val(""),quizApp.$play.fadeIn()})}),quizApp.setPlayers(quizApp.totalPlayers),quizApp.playersLeft=quizApp.players.length},quizApp.setPlayers=function(e){for(var t=0;e>t;t++)quizApp.players[t]={playerName:"player"+Number(t+1),playerAlias:quizApp.playerNames[t],lives:quizApp.lives,eliminated:!1},""===quizApp.players[t].playerAlias&&(quizApp.players[t].playerAlias="Player "+Number(t+1))},quizApp.reset=function(){quizApp.$answers.empty(),quizApp.$play.fadeOut(function(){quizApp.$movieInput.val(""),quizApp.$displayTurn.empty(),quizApp.$guessMovie.find("input").removeClass("is-disabled"),quizApp.$passTurn.removeClass("is-disabled"),quizApp.$reset.text("Reset"),quizApp.$setup.fadeIn()})},quizApp.updateDOM=function(){quizApp.clearSetup(),$.each(quizApp.credits,function(e,t){var i=$("<div>").addClass("movie disabled answer"+e).append("<h3>"+t.title+" ("+t.year+")");quizApp.$answers.append(i)}),quizApp.$answers.prepend('<p class="moviesremain">According to TMDb, '+quizApp.name+" has been in "+quizApp.credits.length+' movies.<span class="movies-left"></span></p>'),quizApp.showTurn()},quizApp.guessMovie=function(){quizApp.resetBools(),quizApp.activeInput=document.activeElement,quizApp.movieGuess=quizApp.$movieInput.val(),""!==quizApp.movieGuess?quizApp.compareGuess(quizApp.movieGuess):swal("Enter a guess!","","error")},quizApp.pass=function(){quizApp.resetBools(),quizApp.movieGuess="the movie you couldn't think of",quizApp.compareGuess(quizApp.movieGuess)},quizApp.compareGuess=function(){$.each(quizApp.credits,function(e,t){var i=t.title.toLowerCase(),n=quizApp.movieGuess.toLowerCase();return quizApp.guess=quizApp.stringManipulate(n),quizApp.answer=quizApp.stringManipulate(i),quizApp.guess===quizApp.answer?quizApp.$answers.find("div.answer"+e).hasClass("disabled")?(quizApp.rightAnswer(e),!1):(quizApp.sameAnswer(),!1):e+1===quizApp.credits.length?(quizApp.wrongAnswer(),!1):void 0})},quizApp.stringManipulate=function(e){return e=" "+e+" ",e=e.replace(/(?:(the |a |an ))/,""),e=e.replace(/([&+])/g,"and"),e=e.replace(/(\s-\s)/g," "),e=e.replace(/([^a-zA-Z\d\s])/g,""),e=e.replace(/(\sse7en\s)/g,"seven"),e=e.replace(/(\s1\s)/g," one "),e=e.replace(/(\s2\s)/g," two "),e=e.replace(/(\s3\s)/g," three "),e=e.replace(/(\s4\s)/g," four "),e=e.replace(/(\s5\s)/g," five "),e=e.replace(/(\s6\s)/g," six "),e=e.replace(/(\s7\s)/g," seven "),e=e.replace(/(\s8\s)/g," eight "),e=e.replace(/(\s9\s)/g," nine "),e=e.replace(/(\s10\s)/g," ten "),e=e.replace(/(\s11\s)/g," eleven "),e=e.replace(/(\s12\s)/g," twelve "),e=e.replace(/(\s13\s)/g," thirteen "),e=e.replace(/(\s14\s)/g," fourteen "),e=e.replace(/(\s15\s)/g," fifteen "),e=e.replace(/(\s16\s)/g," sixteen "),e=e.replace(/(\s17\s)/g," seventeen "),e=e.replace(/(\s21\s)/g," twentyone "),e=e.replace(/(\s22\s)/g," twentytwo "),e=e.replace(/(\s30\s)/g," thirty "),e=e.replace(/(\si\s)/g," one "),e=e.replace(/(\sii\s)/g," two "),e=e.replace(/(\siii\s)/g," three "),e=e.replace(/(\siv\s)/g," four "),e=e.replace(/(\sv\s)/g," five "),e=e.replace(/(\svi\s)/g," six "),e=e.replace(/(\svii\s)/g," seven "),e=e.replace(/(\sviii\s)/g," eight "),e=e.replace(/(\six\s)/g," nine "),e=e.replace(/([àáâãäå])/g,"a"),e=e.replace(/([ç])/g,"c"),e=e.replace(/([èéêë])/g,"e"),e=e.replace(/([ìíîï])/g,"i"),e=e.replace(/([ñ])/g,"n"),e=e.replace(/([òóôõö])/g,"o"),e=e.replace(/([ùúûü])/g,"u"),e=e.replace(/([ýÿ])/g,"y"),e=e.replace(/(\s)/g,"")},quizApp.rightAnswer=function(e){quizApp.currentAnswer="correct",quizApp.$answers.find("div.answer"+e).addClass(quizApp.players[quizApp.activePlayer].playerName).insertAfter(quizApp.$answers.find(".moviesremain")).fadeIn(function(){$(this).removeClass("disabled")}),quizApp.moviesLeft--,quizApp.moviesLeft>0?(quizApp.$answers.find(".movies-left").text(" "+quizApp.moviesLeft+" more to go."),quizApp.endTurn()):quizApp.noMoreMovies()},quizApp.wrongAnswer=function(){quizApp.currentAnswer="wrong",quizApp.players[quizApp.activePlayer].lives--,0===quizApp.players[quizApp.activePlayer].lives&&quizApp.eliminatePlayer(),quizApp.endTurn()},quizApp.sameAnswer=function(){quizApp.currentAnswer="same",quizApp.players[quizApp.activePlayer].lives--,0==quizApp.players[quizApp.activePlayer].lives&&quizApp.eliminatePlayer(),quizApp.endTurn()},quizApp.endTurn=function(){quizApp.switchPlayer(),1==quizApp.playersLeft?quizApp.declareWinner():quizApp.showTurn(),quizApp.alerts(),0==quizApp.keepPlaying&&quizApp.gameOver(quizApp.players[quizApp.activePlayer].playerAlias)},quizApp.showTurn=function(){quizApp.$guessMovie.removeClass().addClass(quizApp.players[quizApp.activePlayer].playerName),quizApp.$displayTurn.html(1===quizApp.lives?"It is "+quizApp.players[quizApp.activePlayer].playerAlias+"'s turn.":1==quizApp.players[quizApp.activePlayer].lives?"It is "+quizApp.players[quizApp.activePlayer].playerAlias+'\'s turn. You have <span class="one-life">'+quizApp.players[quizApp.activePlayer].lives+"</span> life left.":"It is "+quizApp.players[quizApp.activePlayer].playerAlias+"'s turn. You have "+quizApp.players[quizApp.activePlayer].lives+" lives left.")},quizApp.eliminatePlayer=function(){quizApp.players[quizApp.activePlayer].eliminated=!0,quizApp.playersLeft--,quizApp.playerEliminated=!0},quizApp.switchPlayer=function(){quizApp.activePlayer;for(quizApp.activePlayer++,quizApp.activePlayer>=quizApp.players.length&&(quizApp.activePlayer=0);quizApp.players[quizApp.activePlayer].eliminated;)quizApp.activePlayer++},quizApp.noMoreMovies=function(){quizApp.keepPlaying=!1},quizApp.declareWinner=function(){quizApp.keepPlaying=!1},quizApp.gameOver=function(e){quizApp.$guessMovie.find("input").addClass("is-disabled"),quizApp.$passTurn.addClass("is-disabled"),quizApp.$displayTurn.text(e+" wins!"),quizApp.$reset.text("Play again?"),quizApp.$answers.find(".disabled").removeClass("disabled");var t=Number(quizApp.credits.length-quizApp.moviesLeft);quizApp.$answers.find(".moviesremain").text("You correctly guessed "+t+" of "+quizApp.name+"'s movies, but missed "+quizApp.moviesLeft+". Scroll down to see them.")},quizApp.alerts=function(){"correct"==quizApp.currentAnswer?swal({title:"Correct!",type:"success",closeOnConfirm:!1},function(){0==quizApp.keepPlaying?swal({title:"No more movies!",text:"You have somehow guessed them all!",type:"success"}):quizApp.nextPlayerAlert()}):"same"==quizApp.currentAnswer?swal({title:"Nope!",text:"Someone already got that one! Pay attention!",type:"error",closeOnConfirm:!1},function(){quizApp.wrongAnswerAlerts()}):swal({title:"Nope!",text:quizApp.name+" is not in "+quizApp.movieGuess,type:"error",closeOnConfirm:!1},function(){quizApp.wrongAnswerAlerts()})},quizApp.wrongAnswerAlerts=function(){quizApp.playerEliminated!==!1?swal({title:"You have been eliminated!",imageUrl:"images/coffin.png",closeOnConfirm:!1},function(){0==quizApp.keepPlaying?swal({title:quizApp.players[quizApp.activePlayer].playerAlias+" wins!",text:"You are the Last Man Stanton!",imageUrl:"images/award.png"}):quizApp.nextPlayerAlert()}):quizApp.nextPlayerAlert()},quizApp.nextPlayerAlert=function(){1==quizApp.players[quizApp.activePlayer].lives&&quizApp.lives>1?swal({title:"Last chance, "+quizApp.players[quizApp.activePlayer].playerAlias+"!",text:"You have one life left.",type:"warning"},function(){quizApp.$movieInput.val("").attr("placeholder",quizApp.players[quizApp.activePlayer].playerAlias+"'s turn!").focus()}):swal({title:""+quizApp.players[quizApp.activePlayer].playerAlias+"'s turn!"},function(){quizApp.$movieInput.val("").attr("placeholder",quizApp.players[quizApp.activePlayer].playerAlias+"'s turn!").focus()})},quizApp.resetBools=function(){quizApp.keepPlaying=!0,quizApp.playerEliminated=!1,quizApp.currentAnswer=""},$(function(){quizApp.init()}),function(e,t){function i(){var e='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert" tabIndex="-1"><div class="icon error"><span class="x-mark"><span class="line left"></span><span class="line right"></span></span></div><div class="icon warning"> <span class="body"></span> <span class="dot"></span> </div> <div class="icon info"></div> <div class="icon success"> <span class="line tip"></span> <span class="line long"></span> <div class="placeholder"></div> <div class="fix"></div> </div> <div class="icon custom"></div> <h2>Title</h2><p>Text</p><button class="cancel" tabIndex="2">Cancel</button><button class="confirm" tabIndex="1">OK</button></div>',i=t.createElement("div");i.innerHTML=e,t.body.appendChild(i)}function n(t){var i=d(),n=i.querySelector("h2"),p=i.querySelector("p"),a=i.querySelector("button.cancel"),s=i.querySelector("button.confirm");if(n.innerHTML=w(t.title).split("\n").join("<br>"),p.innerHTML=w(t.text||"").split("\n").join("<br>"),t.text&&$(p),C(i.querySelectorAll(".icon")),t.type){for(var u=!1,l=0;l<m.length;l++)if(t.type===m[l]){u=!0;break}if(!u)return e.console.error("Unknown alert type: "+t.type),!1;var o=i.querySelector(".icon."+t.type);switch($(o),t.type){case"success":g(o,"animate"),g(o.querySelector(".tip"),"animateSuccessTip"),g(o.querySelector(".long"),"animateSuccessLong");break;case"error":g(o,"animateErrorIcon"),g(o.querySelector(".x-mark"),"animateXMark");break;case"warning":g(o,"pulseWarning"),g(o.querySelector(".body"),"pulseWarningIns"),g(o.querySelector(".dot"),"pulseWarningIns")}}if(t.imageUrl){var c=i.querySelector(".icon.custom");c.style.backgroundImage="url("+t.imageUrl+")",$(c);var A=80,q=80;if(t.imageSize){var y=t.imageSize.split("x")[0],z=t.imageSize.split("x")[1];y&&z?(A=y,q=z,c.css({width:y+"px",height:z+"px"})):e.console.error("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+t.imageSize)}c.setAttribute("style",c.getAttribute("style")+"width:"+A+"px; height:"+q+"px")}i.setAttribute("data-has-cancel-button",t.showCancelButton),t.showCancelButton?a.style.display="inline-block":C(a),t.cancelButtonText&&(a.innerHTML=w(t.cancelButtonText)),t.confirmButtonText&&(s.innerHTML=w(t.confirmButtonText)),s.style.backgroundColor=t.confirmButtonColor,r(s,t.confirmButtonColor),i.setAttribute("data-allow-ouside-click",t.allowOutsideClick);var f=t.doneFunction?!0:!1;i.setAttribute("data-has-done-function",f)}function p(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var i,n,p="#";for(n=0;3>n;n++)i=parseInt(e.substr(2*n,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),p+=("00"+i).substr(i.length);return p}function a(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null}function r(e,t){var i=a(t);e.style.boxShadow="0 0 2px rgba("+i+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"}function s(){var e=d();S(f(),10),$(e),g(e,"showSweetAlert"),h(e,"hideSweetAlert"),o=t.activeElement,initialActiveElement=quizApp.activeInput;var i=e.querySelector("button.confirm");i.focus(),setTimeout(function(){g(e,"visible")},500)}function u(){var i=d();T(f(),5),T(i,5),h(i,"showSweetAlert"),g(i,"hideSweetAlert"),h(i,"visible");var n=i.querySelector(".icon.success");h(n,"animate"),h(n.querySelector(".tip"),"animateSuccessTip"),h(n.querySelector(".long"),"animateSuccessLong");var p=i.querySelector(".icon.error");h(p,"animateErrorIcon"),h(p.querySelector(".x-mark"),"animateXMark");var a=i.querySelector(".icon.warning");h(a,"pulseWarning"),h(a.querySelector(".body"),"pulseWarningIns"),h(a.querySelector(".dot"),"pulseWarningIns"),e.onkeydown=A,t.onclick=c,initialActiveElement&&initialActiveElement.focus(),q=void 0}function l(){var e=d();e.style.marginTop=P(d())}var o,c,A,q,y=".sweet-alert",z=".sweet-overlay",m=["error","warning","info","success"],d=function(){return t.querySelector(y)},f=function(){return t.querySelector(z)},v=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},g=function(e,t){v(e,t)||(e.className+=" "+t)},h=function(e,t){var i=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(v(e,t)){for(;i.indexOf(" "+t+" ")>=0;)i=i.replace(" "+t+" "," ");e.className=i.replace(/^\s+|\s+$/g,"")}},w=function(e){var i=t.createElement("div");return i.appendChild(t.createTextNode(e)),i.innerHTML},b=function(e){e.style.opacity="",e.style.display="block"},$=function(e){if(e&&!e.length)return b(e);for(var t=0;t<e.length;++t)b(e[t])},x=function(e){e.style.opacity="",e.style.display="none"},C=function(e){if(e&&!e.length)return x(e);for(var t=0;t<e.length;++t)x(e[t])},k=function(e,t){for(var i=t.parentNode;null!==i;){if(i===e)return!0;i=i.parentNode}return!1},P=function(e){e.style.left="-9999px",e.style.display="block";var t=e.clientHeight,i=parseInt(getComputedStyle(e).getPropertyValue("padding"),10);return e.style.left="",e.style.display="none","-"+parseInt(t/2+i)+"px"},S=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var i=+new Date,n=function(){e.style.opacity=+e.style.opacity+(new Date-i)/100,i=+new Date,+e.style.opacity<1&&setTimeout(n,t)};n()}},T=function(e,t){t=t||16,e.style.opacity=1;var i=+new Date,n=function(){e.style.opacity=+e.style.opacity-(new Date-i)/100,i=+new Date,+e.style.opacity>0?setTimeout(n,t):e.style.display="none"};n()};e.sweetAlert=e.swal=function(){var i={title:"",text:"",type:null,allowOutsideClick:!1,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null};if(void 0===arguments[0])return e.console.error("sweetAlert expects at least 1 attribute!"),!1;switch(typeof arguments[0]){case"string":i.title=arguments[0],i.text=arguments[1]||"",i.type=arguments[2]||"";break;case"object":if(void 0===arguments[0].title)return e.console.error('Missing "title" argument!'),!1;i.title=arguments[0].title,i.text=arguments[0].text||i.text,i.type=arguments[0].type||i.type,i.allowOutsideClick=arguments[0].allowOutsideClick||i.allowOutsideClick,i.showCancelButton=void 0!==arguments[0].showCancelButton?arguments[0].showCancelButton:i.showCancelButton,i.closeOnConfirm=void 0!==arguments[0].closeOnConfirm?arguments[0].closeOnConfirm:i.closeOnConfirm,i.closeOnCancel=void 0!==arguments[0].closeOnCancel?arguments[0].closeOnCancel:i.closeOnCancel,i.confirmButtonText=i.showCancelButton?"Confirm":i.confirmButtonText,i.confirmButtonText=arguments[0].confirmButtonText||i.confirmButtonText,i.confirmButtonColor=arguments[0].confirmButtonColor||i.confirmButtonColor,i.cancelButtonText=arguments[0].cancelButtonText||i.cancelButtonText,i.imageUrl=arguments[0].imageUrl||i.imageUrl,i.imageSize=arguments[0].imageSize||i.imageSize,i.doneFunction=arguments[1]||null;break;default:return e.console.error('Unexpected type of argument! Expected "string" or "object", got '+typeof arguments[0]),!1}n(i),l(),s();for(var a=d(),r=function(e){var t=e.target||e.srcElement,n="confirm"===t.className,r=v(a,"visible"),s=i.doneFunction&&"true"===a.getAttribute("data-has-done-function");switch(e.type){case"mouseover":n&&(e.target.style.backgroundColor=p(i.confirmButtonColor,-.04));break;case"mouseout":n&&(e.target.style.backgroundColor=i.confirmButtonColor);break;case"mousedown":n&&(e.target.style.backgroundColor=p(i.confirmButtonColor,-.14));break;case"mouseup":n&&(e.target.style.backgroundColor=p(i.confirmButtonColor,-.04));break;case"focus":var l=a.querySelector("button.confirm"),o=a.querySelector("button.cancel");n?o.style.boxShadow="none":l.style.boxShadow="none";break;case"click":if(n&&s&&r)i.doneFunction(!0),i.closeOnConfirm&&u();else if(s&&r){var c=String(i.doneFunction).replace(/\s/g,""),A="function("===c.substring(0,9)&&")"!==c.substring(9,10);A&&i.doneFunction(!1),i.closeOnCancel&&u()}else u()}},o=a.querySelectorAll("button"),A=0;A<o.length;A++)o[A].onclick=r,o[A].onmouseover=r,o[A].onmouseout=r,o[A].onmousedown=r,o[A].onfocus=r;c=t.onclick,t.onclick=function(e){var t=e.target||e.srcElement,i=a===t,n=k(a,e.target),p=v(a,"visible"),r="true"===a.getAttribute("data-allow-ouside-click");!i&&!n&&p&&r&&u()}},function(){"complete"===t.readyState||"interactive"===t.readyState?i():t.addEventListener?t.addEventListener("DOMContentLoaded",function(){t.removeEventListener("DOMContentLoaded",arguments.callee,!1),i()},!1):t.attachEvent&&t.attachEvent("onreadystatechange",function(){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",arguments.callee),i())})}()}(window,document);var quizApp={};quizApp.key="9314b8803e6b1e173d0c8a52303b82ce",quizApp.name="",quizApp.credits=[],quizApp.moviesLeft=0,quizApp.players=[],quizApp.activePlayer=0,quizApp.totalPlayers=3,quizApp.playersLeft=3,quizApp.lives=1,quizApp.playerEliminated=!1,quizApp.keepPlaying=!0,quizApp.init=function(){quizApp.$setup=$("#setup"),quizApp.$answers=$("#answers"),quizApp.$nameInput=$("#name-input"),quizApp.$random=$("#random-name"),quizApp.$setup=$("div#setup"),quizApp.$play=$("div#play"),quizApp.$reset=$("#reset"),quizApp.$movieInput=$("#movie-input"),quizApp.$guessMovie=$("#guess-movie"),quizApp.$numPlayers=$("#players"),quizApp.$playerField=$("#setup").find("p.player-number"),quizApp.$lives=$("#lives"),quizApp.$passTurn=$("#pass-turn"),quizApp.$displayTurn=$("#display-turn"),$("button").on("click",function(e){e.preventDefault()}),quizApp.$setup.on("submit",function(e){e.preventDefault(),quizApp.startGame()}),quizApp.$random.on("click",function(){quizApp.randomStart()}),quizApp.$reset.on("click",function(){quizApp.reset()}),quizApp.$guessMovie.on("submit",function(e){e.preventDefault(),quizApp.guessMovie()}),quizApp.$passTurn.on("click",function(){quizApp.pass()}),quizApp.$numPlayers.on("input change",function(){quizApp.totalPlayers=$(this).val(),quizApp.$playerField.text(quizApp.totalPlayers+" players"),1==quizApp.totalPlayers&&quizApp.$playerField.text(quizApp.totalPlayers+" player")})},quizApp.setVariables=function(){quizApp.lives=Number(quizApp.$lives.find("input:checked").val()),quizApp.playersLeft=quizApp.totalPlayers,quizApp.moviesLeft=0,quizApp.players=[],quizApp.activePlayer=0,quizApp.credits=[]},quizApp.startGame=function(){quizApp.$answers.empty(),quizApp.setVariables(),quizApp.name=quizApp.$nameInput.val(),""!==quizApp.name?quizApp.getName(quizApp.name):swal("Enter a name!","","error")},quizApp.randomStart=function(){quizApp.$answers.empty(),quizApp.setVariables(),$.ajax({url:"http://api.themoviedb.org/3/person/popular",type:"GET",dataType:"jsonp",data:{api_key:"9314b8803e6b1e173d0c8a52303b82ce",page:1},success:function(e){var t=Math.floor(Math.random()*e.results.length),i=e.results[t].id;quizApp.name=e.results[t].name,swal({title:quizApp.name+"?",text:"Ever heard of them?",type:"info",cancelButtonText:"Nope",confirmButtonText:"Yep",showCancelButton:!0,closeOnCancel:!1},function(e){e?quizApp.getCredits(i):(quizApp.randomStart(),console.log("cancel"))})}})},quizApp.getName=function(e){$.ajax({url:"http://api.themoviedb.org/3/search/person",type:"GET",dataType:"jsonp",data:{api_key:"9314b8803e6b1e173d0c8a52303b82ce",query:e},success:function(e){if(e.total_results>0){var t=e.results[0].id;quizApp.name=e.results[0].name,quizApp.getCredits(t)}else swal("Whoops!","That name isn't in TMDb. Check your spelling and try again.","error")}})},quizApp.getCredits=function(e){$.ajax({url:"http://api.themoviedb.org/3/person/"+e+"/movie_credits",type:"GET",dataType:"jsonp",data:{api_key:"9314b8803e6b1e173d0c8a52303b82ce"},success:function(e){var t=e.cast;quizApp.parseData(t)}})},quizApp.parseData=function(e){quizApp.credits=[],$.each(e,function(e,t){""!==t.character&&t.release_date&&t.title&&(quizApp.credits.push({title:t.title,year:Number(t.release_date.slice(0,4))}),quizApp.moviesLeft++)}),quizApp.checkLength(),quizApp.credits=quizApp.credits.sort(quizApp.sortByYear),quizApp.updateDOM()},quizApp.checkLength=function(){quizApp.credits.length<10&&(console.log("There are fewer than 10 movies on this list"),swal({title:"Just so you know!",text:"There are only going to be "+quizApp.length+"movies to choose from.",type:"warning"}))},quizApp.sortByYear=function(e,t){var i=e.year,n=t.year;return n>i?-1:i>n?1:0},quizApp.clearSetup=function(){$("p.benson").slideUp(function(){quizApp.$setup.fadeOut(function(){quizApp.$nameInput.val(""),quizApp.$play.fadeIn()})}),quizApp.setPlayers(quizApp.totalPlayers),quizApp.playersLeft=quizApp.players.length},quizApp.setPlayers=function(e){for(var t=0;e>t;t++)quizApp.players[t]={playerName:"player"+Number(t+1),playerAlias:"Player "+Number(t+1),lives:quizApp.lives,eliminated:!1}},quizApp.reset=function(){quizApp.$answers.empty(),quizApp.$play.fadeOut(function(){quizApp.$movieInput.val(""),quizApp.$displayTurn.empty(),quizApp.$guessMovie.find("input").removeClass("is-disabled"),quizApp.$passTurn.removeClass("is-disabled"),quizApp.$reset.text("Reset"),quizApp.$setup.fadeIn()})},quizApp.updateDOM=function(){quizApp.clearSetup(),$.each(quizApp.credits,function(e,t){var i=$("<div>").addClass("movie disabled answer"+e).append("<h3>"+t.title+" ("+t.year+")");quizApp.$answers.append(i)}),quizApp.$answers.prepend('<p class="moviesremain">According to TMDb, '+quizApp.name+" has been in "+quizApp.credits.length+' movies.<span class="movies-left"></span></p>'),quizApp.showTurn()},quizApp.guessMovie=function(){quizApp.resetBools(),quizApp.movieGuess=quizApp.$movieInput.val(),""!==quizApp.movieGuess?quizApp.compareGuess(quizApp.movieGuess):swal("Enter a guess!","","error")},quizApp.pass=function(){quizApp.resetBools(),quizApp.movieGuess="the movie you couldn't think of",quizApp.compareGuess(quizApp.movieGuess)},quizApp.compareGuess=function(){$.each(quizApp.credits,function(e,t){var i=t.title.toLowerCase(),n=quizApp.movieGuess.toLowerCase();return quizApp.guess=quizApp.stringManipulate(n),quizApp.answer=quizApp.stringManipulate(i),quizApp.guess===quizApp.answer?quizApp.$answers.find("div.answer"+e).hasClass("disabled")?(quizApp.rightAnswer(e),!1):(quizApp.sameAnswer(),!1):e+1===quizApp.credits.length?(quizApp.wrongAnswer(),!1):void 0})},quizApp.stringManipulate=function(e){return e=" "+e+" ",e=e.replace(/(?:(the |a |an ))/,""),e=e.replace(/([&+])/g,"and"),e=e.replace(/(\s-\s)/g," "),e=e.replace(/([^a-zA-Z\d\s])/g,""),e=e.replace(/(\sse7en\s)/g,"seven"),e=e.replace(/(\s1\s)/g," one "),e=e.replace(/(\s2\s)/g," two "),e=e.replace(/(\s3\s)/g," three "),e=e.replace(/(\s4\s)/g," four "),e=e.replace(/(\s5\s)/g," five "),e=e.replace(/(\s6\s)/g," six "),e=e.replace(/(\s7\s)/g," seven "),e=e.replace(/(\s8\s)/g," eight "),e=e.replace(/(\s9\s)/g," nine "),e=e.replace(/(\s10\s)/g," ten "),e=e.replace(/(\s11\s)/g," eleven "),e=e.replace(/(\s12\s)/g," twelve "),e=e.replace(/(\s13\s)/g," thirteen "),e=e.replace(/(\s14\s)/g," fourteen "),e=e.replace(/(\s15\s)/g," fifteen "),e=e.replace(/(\s16\s)/g," sixteen "),e=e.replace(/(\s17\s)/g," seventeen "),e=e.replace(/(\s21\s)/g," twentyone "),e=e.replace(/(\s22\s)/g," twentytwo "),e=e.replace(/(\s30\s)/g," thirty "),e=e.replace(/(\si\s)/g," one "),e=e.replace(/(\sii\s)/g," two "),e=e.replace(/(\siii\s)/g," three "),e=e.replace(/(\siv\s)/g," four "),e=e.replace(/(\sv\s)/g," five "),e=e.replace(/(\svi\s)/g," six "),e=e.replace(/(\svii\s)/g," seven "),e=e.replace(/(\sviii\s)/g," eight "),e=e.replace(/(\six\s)/g," nine "),e=e.replace(/([àáâãäå])/g,"a"),e=e.replace(/([ç])/g,"c"),e=e.replace(/([èéêë])/g,"e"),e=e.replace(/([ìíîï])/g,"i"),e=e.replace(/([ñ])/g,"n"),e=e.replace(/([òóôõö])/g,"o"),e=e.replace(/([ùúûü])/g,"u"),e=e.replace(/([ýÿ])/g,"y"),e=e.replace(/(\s)/g,""),console.log("|"+e+"|"),e},quizApp.rightAnswer=function(e){quizApp.currentAnswer="correct",quizApp.$answers.find("div.answer"+e).addClass(quizApp.players[quizApp.activePlayer].playerName).insertAfter(quizApp.$answers.find(".moviesremain")).fadeIn(function(){$(this).removeClass("disabled")}),quizApp.moviesLeft--,quizApp.moviesLeft>0?(quizApp.$answers.find(".movies-left").text(" "+quizApp.moviesLeft+" more to go."),quizApp.endTurn()):quizApp.noMoreMovies()},quizApp.wrongAnswer=function(){quizApp.currentAnswer="wrong",quizApp.players[quizApp.activePlayer].lives--,0===quizApp.players[quizApp.activePlayer].lives&&quizApp.eliminatePlayer(),quizApp.endTurn()},quizApp.sameAnswer=function(){quizApp.currentAnswer="same",quizApp.players[quizApp.activePlayer].lives--,0==quizApp.players[quizApp.activePlayer].lives&&quizApp.eliminatePlayer(),quizApp.endTurn()},quizApp.endTurn=function(){quizApp.switchPlayer(),1==quizApp.playersLeft?quizApp.declareWinner():quizApp.showTurn(),quizApp.alerts(),0==quizApp.keepPlaying&&quizApp.gameOver(quizApp.players[quizApp.activePlayer].playerAlias)},quizApp.showTurn=function(){quizApp.$guessMovie.removeClass().addClass(quizApp.players[quizApp.activePlayer].playerName),quizApp.$displayTurn.html(1===quizApp.lives?"It is "+quizApp.players[quizApp.activePlayer].playerAlias+"'s turn.":1==quizApp.players[quizApp.activePlayer].lives?"It is "+quizApp.players[quizApp.activePlayer].playerAlias+'\'s turn. You have <span class="one-life">'+quizApp.players[quizApp.activePlayer].lives+"</span> life left.":"It is "+quizApp.players[quizApp.activePlayer].playerAlias+"'s turn. You have "+quizApp.players[quizApp.activePlayer].lives+" lives left.")},quizApp.eliminatePlayer=function(){quizApp.players[quizApp.activePlayer].eliminated=!0,quizApp.playersLeft--,quizApp.playerEliminated=!0},quizApp.switchPlayer=function(){for(quizApp.activePlayer,quizApp.activePlayer++,quizApp.activePlayer>=quizApp.players.length&&(quizApp.activePlayer=0);quizApp.players[quizApp.activePlayer].eliminated;)quizApp.activePlayer++},quizApp.noMoreMovies=function(){quizApp.keepPlaying=!1},quizApp.declareWinner=function(){quizApp.keepPlaying=!1},quizApp.gameOver=function(e){quizApp.$guessMovie.find("input").addClass("is-disabled"),quizApp.$passTurn.addClass("is-disabled"),quizApp.$displayTurn.text(e+" wins!"),quizApp.$reset.text("Play again?"),quizApp.$answers.find(".disabled").removeClass("disabled");var t=Number(quizApp.credits.length-quizApp.moviesLeft);quizApp.$answers.find(".moviesremain").text("You correctly guessed "+t+" of "+quizApp.name+"'s movies, but missed "+quizApp.moviesLeft+". Scroll down to see them.")},quizApp.alerts=function(){"correct"==quizApp.currentAnswer?swal({title:"Correct!",type:"success",closeOnConfirm:!1},function(){0==quizApp.keepPlaying?swal({title:"No more movies!",text:"You have somehow guessed them all!",type:"success"}):quizApp.nextPlayerAlert()}):"same"==quizApp.currentAnswer?swal({title:"Nope!",text:"Someone already got that one! Pay attention!",type:"error",closeOnConfirm:!1},function(){quizApp.wrongAnswerAlerts()}):swal({title:"Nope!",text:quizApp.name+" is not in "+quizApp.movieGuess,type:"error",closeOnConfirm:!1},function(){quizApp.wrongAnswerAlerts()})},quizApp.wrongAnswerAlerts=function(){quizApp.playerEliminated!==!1?swal({title:"You have been eliminated!",imageUrl:"images/coffin.png",closeOnConfirm:!1},function(){0==quizApp.keepPlaying?swal({title:quizApp.players[quizApp.activePlayer].playerAlias+" wins!",text:"You are the Last Man Stanton!",imageUrl:"images/award.png"}):quizApp.nextPlayerAlert()}):quizApp.nextPlayerAlert()},quizApp.nextPlayerAlert=function(){1==quizApp.players[quizApp.activePlayer].lives&&quizApp.lives>1?swal({title:"Last chance, "+quizApp.players[quizApp.activePlayer].playerAlias+"!",text:"You have one life left.",type:"warning"},function(){quizApp.$movieInput.val("").attr("placeholder",quizApp.players[quizApp.activePlayer].playerAlias+"'s turn!").focus()}):swal({title:""+quizApp.players[quizApp.activePlayer].playerAlias+"'s turn!"},function(){quizApp.$movieInput.val("").attr("placeholder",quizApp.players[quizApp.activePlayer].playerAlias+"'s turn!").focus()})},quizApp.resetBools=function(){quizApp.keepPlaying=!0,quizApp.playerEliminated=!1,quizApp.currentAnswer=""
},$(function(){quizApp.init()}),!function(e,t){function i(){var e='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert" tabIndex="-1"><div class="icon error"><span class="x-mark"><span class="line left"></span><span class="line right"></span></span></div><div class="icon warning"> <span class="body"></span> <span class="dot"></span> </div> <div class="icon info"></div> <div class="icon success"> <span class="line tip"></span> <span class="line long"></span> <div class="placeholder"></div> <div class="fix"></div> </div> <div class="icon custom"></div> <h2>Title</h2><p>Text</p><button class="cancel" tabIndex="2">Cancel</button><button class="confirm" tabIndex="1">OK</button></div>',i=t.createElement("div");i.innerHTML=e,t.body.appendChild(i)}function n(t){var i=d(),n=i.querySelector("h2"),p=i.querySelector("p"),a=i.querySelector("button.cancel"),s=i.querySelector("button.confirm");if(n.innerHTML=w(t.title).split("\n").join("<br>"),p.innerHTML=w(t.text||"").split("\n").join("<br>"),t.text&&$(p),C(i.querySelectorAll(".icon")),t.type){for(var u=!1,l=0;l<m.length;l++)if(t.type===m[l]){u=!0;break}if(!u)return e.console.error("Unknown alert type: "+t.type),!1;var o=i.querySelector(".icon."+t.type);switch($(o),t.type){case"success":g(o,"animate"),g(o.querySelector(".tip"),"animateSuccessTip"),g(o.querySelector(".long"),"animateSuccessLong");break;case"error":g(o,"animateErrorIcon"),g(o.querySelector(".x-mark"),"animateXMark");break;case"warning":g(o,"pulseWarning"),g(o.querySelector(".body"),"pulseWarningIns"),g(o.querySelector(".dot"),"pulseWarningIns")}}if(t.imageUrl){var c=i.querySelector(".icon.custom");c.style.backgroundImage="url("+t.imageUrl+")",$(c);var A=80,q=80;if(t.imageSize){var y=t.imageSize.split("x")[0],z=t.imageSize.split("x")[1];y&&z?(A=y,q=z,c.css({width:y+"px",height:z+"px"})):e.console.error("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+t.imageSize)}c.setAttribute("style",c.getAttribute("style")+"width:"+A+"px; height:"+q+"px")}i.setAttribute("data-has-cancel-button",t.showCancelButton),t.showCancelButton?a.style.display="inline-block":C(a),t.cancelButtonText&&(a.innerHTML=w(t.cancelButtonText)),t.confirmButtonText&&(s.innerHTML=w(t.confirmButtonText)),s.style.backgroundColor=t.confirmButtonColor,r(s,t.confirmButtonColor),i.setAttribute("data-allow-ouside-click",t.allowOutsideClick);var f=t.doneFunction?!0:!1;i.setAttribute("data-has-done-function",f)}function p(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var i,n,p="#";for(n=0;3>n;n++)i=parseInt(e.substr(2*n,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),p+=("00"+i).substr(i.length);return p}function a(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null}function r(e,t){var i=a(t);e.style.boxShadow="0 0 2px rgba("+i+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"}function s(){var e=d();S(f(),10),$(e),g(e,"showSweetAlert"),h(e,"hideSweetAlert"),o=t.activeElement;var i=e.querySelector("button.confirm");i.focus(),setTimeout(function(){g(e,"visible")},500)}function u(){var i=d();T(f(),5),T(i,5),h(i,"showSweetAlert"),g(i,"hideSweetAlert"),h(i,"visible");var n=i.querySelector(".icon.success");h(n,"animate"),h(n.querySelector(".tip"),"animateSuccessTip"),h(n.querySelector(".long"),"animateSuccessLong");var p=i.querySelector(".icon.error");h(p,"animateErrorIcon"),h(p.querySelector(".x-mark"),"animateXMark");var a=i.querySelector(".icon.warning");h(a,"pulseWarning"),h(a.querySelector(".body"),"pulseWarningIns"),h(a.querySelector(".dot"),"pulseWarningIns"),e.onkeydown=A,t.onclick=c,o&&o.focus(),q=void 0}function l(){var e=d();e.style.marginTop=P(d())}var o,c,A,q,y=".sweet-alert",z=".sweet-overlay",m=["error","warning","info","success"],d=function(){return t.querySelector(y)},f=function(){return t.querySelector(z)},v=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},g=function(e,t){v(e,t)||(e.className+=" "+t)},h=function(e,t){var i=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(v(e,t)){for(;i.indexOf(" "+t+" ")>=0;)i=i.replace(" "+t+" "," ");e.className=i.replace(/^\s+|\s+$/g,"")}},w=function(e){var i=t.createElement("div");return i.appendChild(t.createTextNode(e)),i.innerHTML},b=function(e){e.style.opacity="",e.style.display="block"},$=function(e){if(e&&!e.length)return b(e);for(var t=0;t<e.length;++t)b(e[t])},x=function(e){e.style.opacity="",e.style.display="none"},C=function(e){if(e&&!e.length)return x(e);for(var t=0;t<e.length;++t)x(e[t])},k=function(e,t){for(var i=t.parentNode;null!==i;){if(i===e)return!0;i=i.parentNode}return!1},P=function(e){e.style.left="-9999px",e.style.display="block";var t=e.clientHeight,i=parseInt(getComputedStyle(e).getPropertyValue("padding"),10);return e.style.left="",e.style.display="none","-"+parseInt(t/2+i)+"px"},S=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var i=+new Date,n=function(){e.style.opacity=+e.style.opacity+(new Date-i)/100,i=+new Date,+e.style.opacity<1&&setTimeout(n,t)};n()}},T=function(e,t){t=t||16,e.style.opacity=1;var i=+new Date,n=function(){e.style.opacity=+e.style.opacity-(new Date-i)/100,i=+new Date,+e.style.opacity>0?setTimeout(n,t):e.style.display="none"};n()},B=function(i){if(MouseEvent){var n=new MouseEvent("click",{view:e,bubbles:!1,cancelable:!0});i.dispatchEvent(n)}else if(t.createEvent){var p=t.createEvent("MouseEvents");p.initEvent("click",!1,!1),i.dispatchEvent(p)}else t.createEventObject?i.fireEvent("onclick"):"function"==typeof i.onclick&&i.onclick()},E=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):e.event&&e.event.hasOwnProperty("cancelBubble")&&(e.event.cancelBubble=!0)};e.sweetAlert=e.swal=function(){function i(e){var t=e.keyCode||e.which;if(-1!==[9,32,27].indexOf(t)){for(var i=e.target||e.srcElement,n=-1,p=0;p<w.length;p++)if(i===w[p]){n=p;break}9===t?(i=-1===n?g:n===w.length-1?w[0]:w[n+1],E(e),i.focus(),r(i,o.confirmButtonColor)):(i=32===t?-1===n?g:void 0:27!==t||h.hidden||"none"===h.style.display?void 0:h,void 0!==i&&B(i,e))}}function a(e){var t=e.target||e.srcElement,i=e.relatedTarget,n=v(y,"visible");if(n){var p=-1;if(null!==i){for(var a=0;a<w.length;a++)if(i===w[a]){p=a;break}-1===p&&t.focus()}else q=t}}var o={title:"",text:"",type:null,allowOutsideClick:!1,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#AEDEF4",cancelButtonText:"Cancel",imageUrl:null,imageSize:null};if(void 0===arguments[0])return e.console.error("sweetAlert expects at least 1 attribute!"),!1;switch(typeof arguments[0]){case"string":o.title=arguments[0],o.text=arguments[1]||"",o.type=arguments[2]||"";break;case"object":if(void 0===arguments[0].title)return e.console.error('Missing "title" argument!'),!1;o.title=arguments[0].title,o.text=arguments[0].text||o.text,o.type=arguments[0].type||o.type,o.allowOutsideClick=arguments[0].allowOutsideClick||o.allowOutsideClick,o.showCancelButton=void 0!==arguments[0].showCancelButton?arguments[0].showCancelButton:o.showCancelButton,o.closeOnConfirm=void 0!==arguments[0].closeOnConfirm?arguments[0].closeOnConfirm:o.closeOnConfirm,o.closeOnCancel=void 0!==arguments[0].closeOnCancel?arguments[0].closeOnCancel:o.closeOnCancel,o.confirmButtonText=o.showCancelButton?"Confirm":o.confirmButtonText,o.confirmButtonText=arguments[0].confirmButtonText||o.confirmButtonText,o.confirmButtonColor=arguments[0].confirmButtonColor||o.confirmButtonColor,o.cancelButtonText=arguments[0].cancelButtonText||o.cancelButtonText,o.imageUrl=arguments[0].imageUrl||o.imageUrl,o.imageSize=arguments[0].imageSize||o.imageSize,o.doneFunction=arguments[1]||null;break;default:return e.console.error('Unexpected type of argument! Expected "string" or "object", got '+typeof arguments[0]),!1}n(o),l(),s();for(var y=d(),z=function(e){var t=e.target||e.srcElement,i="confirm"===t.className,n=v(y,"visible"),a=o.doneFunction&&"true"===y.getAttribute("data-has-done-function");switch(e.type){case"mouseover":i&&(e.target.style.backgroundColor=p(o.confirmButtonColor,-.04));break;case"mouseout":i&&(e.target.style.backgroundColor=o.confirmButtonColor);break;case"mousedown":i&&(e.target.style.backgroundColor=p(o.confirmButtonColor,-.14));break;case"mouseup":i&&(e.target.style.backgroundColor=p(o.confirmButtonColor,-.04));break;case"focus":var r=y.querySelector("button.confirm"),s=y.querySelector("button.cancel");i?s.style.boxShadow="none":r.style.boxShadow="none";break;case"click":if(i&&a&&n)o.doneFunction(!0),o.closeOnConfirm&&u();else if(a&&n){var l=String(o.doneFunction).replace(/\s/g,""),c="function("===l.substring(0,9)&&")"!==l.substring(9,10);c&&o.doneFunction(!1),o.closeOnCancel&&u()}else u()}},m=y.querySelectorAll("button"),f=0;f<m.length;f++)m[f].onclick=z,m[f].onmouseover=z,m[f].onmouseout=z,m[f].onmousedown=z,m[f].onfocus=z;c=t.onclick,t.onclick=function(e){var t=e.target||e.srcElement,i=y===t,n=k(y,e.target),p=v(y,"visible"),a="true"===y.getAttribute("data-allow-ouside-click");!i&&!n&&p&&a&&u()};var g=y.querySelector("button.confirm"),h=y.querySelector("button.cancel"),w=y.querySelectorAll("button:not([type=hidden])");A=e.onkeydown,e.onkeydown=i,g.onblur=a,h.onblur=a,e.onfocus=function(){e.setTimeout(function(){void 0!==q&&(q.focus(),q=void 0)},0)}},function(){"complete"===t.readyState||"interactive"===t.readyState?i():t.addEventListener?t.addEventListener("DOMContentLoaded",function(){t.removeEventListener("DOMContentLoaded",arguments.callee,!1),i()},!1):t.attachEvent&&t.attachEvent("onreadystatechange",function(){"complete"===t.readyState&&(t.detachEvent("onreadystatechange",arguments.callee),i())})}()}(window,document);